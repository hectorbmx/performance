<ion-header class="profile-header" translucent="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/tabs/tab1"></ion-back-button>
    </ion-buttons>

    <ion-title>Profile</ion-title>

    <ion-buttons slot="end">
      <ion-button (click)="goSettings()">
        <ion-icon name="settings-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="profile-content" [fullscreen]="true">
  <div class="profile-wrap">

    <!-- Top identity -->
    <div class="identity">
      <div class="avatar-ring">
        <div class="ring"></div>

        <!-- CORREGIDO: ion-avatar ahora estÃ¡ dentro de .avatar -->
        <div class="avatar profile-avatar" (click)="changeAvatar()">
          <ion-avatar>
            <img *ngIf="vm.photoUrl; else noPhoto" [src]="vm.photoUrl" />
            <ng-template #noPhoto>
              <div class="avatar-fallback"></div>
            </ng-template>
          </ion-avatar>
        </div>

        <!-- <div class="badge-check">
          <ion-icon name="checkmark-circle"></ion-icon>
        </div> -->
      </div>

      <div class="name">{{ vm.fullName }}</div>

      <ion-chip class="role-chip" outline="true">
        <ion-label>{{ vm.roleLabel }}</ion-label>
      </ion-chip>

      <div class="since">{{ vm.memberSinceLabel }}</div>
    </div>

    <!-- Stats -->
    <div class="stats">
      <button type="button" class="stat-card">
        <div class="stat-icon">
          <ion-icon name="barbell-outline"></ion-icon>
        </div>
        <div class="stat-value">{{ vm.stats.workouts }}</div>
        <div class="stat-label">WORKOUTS</div>
      </button>

      <button type="button" class="stat-card">
        <div class="stat-icon">
          <ion-icon name="flame-outline"></ion-icon>
        </div>
        <div class="stat-value">{{ vm.stats.dayStreak }}</div>
        <div class="stat-label">DAY STREAK</div>
      </button>

      <button type="button" class="stat-card">
        <div class="stat-icon">
          <ion-icon name="stats-chart-outline"></ion-icon>
        </div>
        <div class="stat-value">{{ vm.stats.volumeLabel }}</div>
        <div class="stat-label">VOLUME</div>
      </button>
    </div>

    <!-- Account settings -->
    <div class="section-title">ACCOUNT SETTINGS</div>

    <ion-list class="menu" lines="none">
      <ion-item button detail="true" class="menu-item" (click)="goPersonalInfo()">
        <div class="menu-icon">
          <ion-icon name="person-outline"></ion-icon>
        </div>
        <ion-label>Personal Info</ion-label>
      </ion-item>

      <ion-item button detail="true" class="menu-item" (click)="goSubscription()">
        <div class="menu-icon">
          <ion-icon name="star-outline"></ion-icon>
        </div>
        <ion-label>
          Subscription History
          <div class="sub-badge">PRO MEMBER</div>
        </ion-label>
      </ion-item>
    </ion-list>

    <button type="button" class="logout" (click)="logout()">
      LOGOUT
    </button>

    <div class="version">
      App Version 2.4.1 (Build 82)
    </div>
  </div>
</ion-content>