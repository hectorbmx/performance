<ion-header class="ph-header ion-no-border">
  <ion-toolbar class="ph-toolbar">
    <ion-buttons slot="start">
      <ion-button fill="clear" (click)="goBack()">
        <ion-icon name="chevron-back-outline"></ion-icon>
      </ion-button>
    </ion-buttons>

    <ion-title class="ph-title">Payment History</ion-title>

    <ion-buttons slot="end">
      <ion-button fill="clear" (click)="download()">
        <ion-icon name="download-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="ph-content" fullscreen="true">
  <!-- HERO CARD -->
  <div class="hero-card">
    <div class="hero-label">TOTAL PAID</div>
    <div class="hero-amount">\${{ formatMoney(totalPaid) }}</div>

    <div class="hero-bottom">
      <div class="hero-pill">
        <span class="hero-pill-icon">↗</span>
        <span>{{ growthText }}</span>
      </div>

      <div class="hero-plan">
        <div class="hero-plan-label">ACTIVE PLAN:</div>
        <div class="hero-plan-value">{{ activePlan }}</div>
      </div>
    </div>
  </div>

  <!-- SEARCH -->
  <div class="search-wrap">
    <ion-searchbar
      [(ngModel)]="search"
      placeholder="Search transactions..."
      class="ph-search"
      animated="true"
    ></ion-searchbar>
  </div>

  <!-- FILTERS -->
  <div class="chips-row">
    <ion-chip
      *ngFor="let f of filters"
      [class.active]="activeFilter === f.key"
      (click)="setFilter(f.key)"
    >
      <ion-label>{{ f.label }}</ion-label>
    </ion-chip>

    <button class="mini-filter-btn" type="button" aria-label="filters">
      <span class="mini-filter-icon">≡</span>
    </button>
  </div>

  <!-- LIST -->
  <div class="section-title">RECENT TRANSACTIONS</div>

  <div class="tx-card" *ngFor="let p of filteredPayments">
    <div class="tx-icon" [class.pending]="p.status === 'pending'">
      <ion-icon [name]="p.icon === 'cash' ? 'cash-outline' : 'hourglass-outline'"></ion-icon>
    </div>

    <div class="tx-info">
      <div class="tx-title">{{ p.title }}</div>
      <div class="tx-date">{{ formatDate(p.dateISO) }}</div>
    </div>

    <div class="tx-right">
      <div class="tx-amount">\${{ formatMoney(p.amount) }}</div>
      <div class="tx-status" [class.pending]="p.status === 'pending'">
        <span class="dot"></span>
        {{ statusLabel(p.status) }}
      </div>
    </div>
  </div>

  <div style="height: 24px;"></div>
</ion-content>
